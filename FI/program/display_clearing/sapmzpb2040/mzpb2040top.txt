*&---------------------------------------------------------------------*
*& Include MZPB2040TOP                                       Module Pool      SAPMZPB2040
*&
*&---------------------------------------------------------------------*
PROGRAM sapmzpb2040.

"Common
DATA: ok_code  LIKE sy-ucomm,
      gv_dynnr LIKE sy-dynnr,
      gv_subrc LIKE sy-subrc.

"screen 100, 200, 300 condition
TABLES: zspb4005, "screen 100 condition & alv structure
        zspb4006, "screen 200 alv structure
        zspb4007, "screen 200 condition
        zspb4008, "screen 200 condition 2
        zspb4009, "screen 300 condition 1
        zspb4010, "screen 300 alv structure
        zspb4020,
        zspb4024.

RANGES rv_jocum FOR ztpbjonlh-jocum.

"numberange 변수 정의 "4자리 수의 넘버레인지 생성해서 프로그램에서 붙이기
DATA: gv_range_nr TYPE c LENGTH 2, "번호범위의 인터벌 번호를 저장하는 변수
      gv_object   TYPE c LENGTH 9 VALUE 'ZNRPB4021', "NUMBER RANGE 오브젝트명을 저장
      gv_cljocum  TYPE n LENGTH 10.

"class event
CLASS lcl_event_handler DEFINITION.

  PUBLIC SECTION.

    METHODS: handle_hotspot_click FOR EVENT hotspot_click
   OF cl_gui_alv_grid IMPORTING e_row_id e_column_id es_row_no.

ENDCLASS.
DATA go_handler TYPE REF TO lcl_event_handler.

"get alv list

DATA: gt_list TYPE zspb4005_t,
      gs_list LIKE LINE OF gt_list.

"Screen 100 Check Box  "('X': 체크, ' ': 해제)
DATA: gv_check1 TYPE c LENGTH 1,
      gv_check2 TYPE c LENGTH 1,
      gv_check3 TYPE c LENGTH 1,
      gv_check4 TYPE c LENGTH 1,
      gv_check5 TYPE c LENGTH 1,
      gv_check6 TYPE c LENGTH 1,
      gv_check7 TYPE c LENGTH 1,
      gv_check8 TYPE c LENGTH 1.

"get ZTPBJONLI alv list (Detail screen alv) / 신호등
DATA: BEGIN OF gs_jitem_list,
        light  TYPE icon,
        cflagi TYPE char4.
    INCLUDE TYPE zspb4006.
DATA: END OF gs_jitem_list,
gt_jitem_list LIKE TABLE OF gs_jitem_list.

"get 반제할 전표 item alv list (Create screen alv) / 신호등
DATA: BEGIN OF gs_clitem_list,
        light  TYPE icon,
        cflagi TYPE char4.
    INCLUDE TYPE zspb4010.
DATA: END OF gs_clitem_list,
gt_clitem_list LIKE TABLE OF gs_clitem_list.

"popup alv list
DATA: BEGIN OF gs_poplist,
        light  TYPE icon,
        cflagi TYPE char4.
    INCLUDE TYPE zspb4006.
DATA: END OF gs_poplist,
gt_poplist LIKE TABLE OF gs_poplist.

DATA: gt_jhlist TYPE zspb4020_t,
      gs_jhlist LIKE LINE OF gt_jhlist.

"jocum - line item alv list
DATA: BEGIN OF gs_jilist,
        light     TYPE icon,
        cflagi    TYPE char4,
        cellcolor TYPE lvc_t_scol.
    INCLUDE TYPE zspb4021.
DATA: END OF gs_jilist,
gt_jilist LIKE TABLE OF gs_jilist.

"ALV (screen 100)
DATA: go_con  TYPE REF TO cl_gui_custom_container,
      go_alv  TYPE REF TO cl_gui_alv_grid,
      gs_layo TYPE lvc_s_layo.

"전표 ITEM ALV (screen 200)
DATA: go_item     TYPE REF TO cl_gui_custom_container,
      go_item_alv TYPE REF TO cl_gui_alv_grid,
      gs_llayo    TYPE lvc_s_layo.

"반제할 전표 ITEM ALV (screen 300)
DATA: go_clitem     TYPE REF TO cl_gui_custom_container,
      go_clitem_alv TYPE REF TO cl_gui_alv_grid,
      gs_cllayo     TYPE lvc_s_layo.

"POPUP ALV
DATA: go_popup     TYPE REF TO cl_gui_custom_container,
      go_popup_alv TYPE REF TO cl_gui_alv_grid,
      gs_poplayo   TYPE lvc_s_layo.

"jocum - header alv
DATA: go_jh     TYPE REF TO cl_gui_custom_container,
      go_jh_alv TYPE REF TO cl_gui_alv_grid,
      gs_jhlayo TYPE lvc_s_layo.

"jocum - line item alv
DATA: go_ji     TYPE REF TO cl_gui_custom_container,
      go_ji_alv TYPE REF TO cl_gui_alv_grid,
      gs_jilayo TYPE lvc_s_layo.

"ALV layout
DATA: gt_sort    TYPE lvc_t_sort,
      gs_sort    LIKE LINE OF gt_sort,

      gt_fcat    TYPE lvc_t_fcat,
      gs_fcat    LIKE LINE OF gt_fcat,

      gt_ifcat   TYPE lvc_t_fcat,
      gs_ifcat   LIKE LINE OF gt_fcat,

      gt_clfcat  TYPE lvc_t_fcat,
      gs_clfcat  LIKE LINE OF gt_fcat,

      gt_popfcat TYPE lvc_t_fcat,
      gs_popfcat LIKE LINE OF gt_fcat,

      gt_jhfcat  TYPE lvc_t_fcat,
      gs_jhfcat  LIKE LINE OF gt_jhfcat,

      gt_jifcat  TYPE lvc_t_fcat,
      gs_jifcat  LIKE LINE OF gt_jifcat,

      gt_jisort  TYPE lvc_t_sort,
      gs_jisort  LIKE LINE OF gt_sort.




"Domain Fixed Value
DATA: gt_domain TYPE TABLE OF dd07v,
      gs_domain LIKE LINE OF gt_domain.

----------------------------------------------------------------------------------
Extracted by Mass Download version 1.5.5 - E.G.Mellodew. 1998-2025. Sap Release 750
